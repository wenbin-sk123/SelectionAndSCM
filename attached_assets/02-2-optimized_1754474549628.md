# 《电商选品与供应链管理》实训软件 - 优化版需求规格说明书 (SRS)

**版本：** 2.0  
**日期：** 2024年12月  
**撰写人：** AI助手  
**优化重点：** 技术架构、数据模型、API设计、用户体验、评估体系

---

## **1. 引言 (Introduction)**

### **1.1 目的 (Purpose)**
本文档旨在详细定义"电商选品与供应链管理实训软件"的功能与非功能性需求。该软件的核心目标是，将《电商采购实战一本通》一书中的理论知识、操作流程和实战技巧，转化为一个可供学员实践操作的、数据驱动的、全流程的模拟经营平台。

### **1.2 范围 (Scope)**
本软件是一个独立的、基于Web的B/S架构教育模拟系统，采用微服务架构设计。

**软件包含：**
- **前端应用：** Vue 3 + TypeScript + Element Plus
- **后端服务：** ThinkPHP 6.0 + MySQL + Redis
- **AI引擎：** Python + TensorFlow (用于智能谈判和决策模拟)
- **数据可视化：** ECharts + D3.js
- **实时通信：** WebSocket + Socket.io

**软件不包含：**
- 与真实电商平台或支付系统的任何对接
- 真实的商品交易或资金流动
- 真实的社交媒体账号集成

### **1.3 技术架构概览**

#### **1.3.1 系统架构图**
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   前端应用层     │    │   后端服务层     │    │   数据存储层     │
│                 │    │                 │    │                 │
│ Vue 3 + TS      │◄──►│ ThinkPHP 6.0    │◄──►│ MySQL           │
│ Element Plus     │    │ WebSocket       │    │ Redis           │
│ ECharts         │    │ RESTful API     │    │ ElasticSearch   │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         │              ┌─────────────────┐              │
         └──────────────►│   AI引擎层      │◄─────────────┘
                        │                 │
                        │ Python          │
                        │ TensorFlow      │
                        │ NLP模型         │
                        └─────────────────┘
```

#### **1.3.2 核心数据模型**

**用户实体 (User)**
```sql
CREATE TABLE users (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    role ENUM('STUDENT', 'INSTRUCTOR', 'ADMIN') NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

**实训任务实体 (TrainingTask)**
```sql
CREATE TABLE training_tasks (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(200) NOT NULL,
    description TEXT,
    initial_budget DECIMAL(15,2) NOT NULL,
    duration_days INT NOT NULL,
    market_scenario JSON,
    target_kpis JSON,
    created_by BIGINT,
    status ENUM('DRAFT', 'ACTIVE', 'COMPLETED', 'ARCHIVED'),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**学员进度实体 (StudentProgress)**
```sql
CREATE TABLE student_progress (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT,
    task_id BIGINT,
    current_balance DECIMAL(15,2),
    current_day INT DEFAULT 1,
    inventory_value DECIMAL(15,2),
    total_revenue DECIMAL(15,2),
    total_profit DECIMAL(15,2),
    kpi_scores JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

**ThinkPHP 6.0 模型示例**
```php
<?php
namespace app\model;

use think\Model;

class User extends Model
{
    protected $table = 'users';
    protected $autoWriteTimestamp = true;
    
    // 关联学员进度
    public function progress()
    {
        return $this->hasMany(StudentProgress::class, 'user_id');
    }
}

class TrainingTask extends Model
{
    protected $table = 'training_tasks';
    protected $autoWriteTimestamp = true;
    
    // JSON字段自动转换
    protected $json = ['market_scenario', 'target_kpis'];
    protected $jsonAssoc = true;
    
    // 关联学员进度
    public function progress()
    {
        return $this->hasMany(StudentProgress::class, 'task_id');
    }
}

class StudentProgress extends Model
{
    protected $table = 'student_progress';
    protected $autoWriteTimestamp = true;
    
    // JSON字段自动转换
    protected $json = ['kpi_scores'];
    protected $jsonAssoc = true;
    
    // 关联用户
    public function user()
    {
        return $this->belongsTo(User::class, 'user_id');
    }
    
    // 关联任务
    public function task()
    {
        return $this->belongsTo(TrainingTask::class, 'task_id');
    }
}
```

### **1.4 API接口设计**

#### **1.4.1 ThinkPHP 6.0 控制器示例**
```php
<?php
namespace app\controller;

use app\BaseController;
use think\Request;
use think\Response;

class UserController extends BaseController
{
    /**
     * 用户登录
     */
    public function login(Request $request): Response
    {
        $data = $request->post();
        $result = UserService::login($data);
        return json($result);
    }
    
    /**
     * 获取用户信息
     */
    public function profile(): Response
    {
        $user = auth()->user();
        return json(['code' => 200, 'data' => $user]);
    }
}

class TaskController extends BaseController
{
    /**
     * 获取任务列表
     */
    public function index(Request $request): Response
    {
        $params = $request->param();
        $tasks = TaskService::getList($params);
        return json(['code' => 200, 'data' => $tasks]);
    }
    
    /**
     * 创建任务
     */
    public function store(Request $request): Response
    {
        $data = $request->post();
        $task = TaskService::create($data);
        return json(['code' => 200, 'data' => $task]);
    }
}
```

#### **1.4.2 RESTful API规范**
```typescript
// 用户管理API
interface UserAPI {
  // 用户认证
  POST /api/auth/login: LoginRequest → LoginResponse
  POST /api/auth/logout: void → void
  POST /api/auth/refresh: RefreshRequest → TokenResponse
  
  // 用户信息
  GET /api/users/profile: void → UserProfile
  PUT /api/users/profile: UpdateProfileRequest → UserProfile
  GET /api/users/{id}/progress: void → StudentProgress[]
}

// 实训任务API
interface TaskAPI {
  // 任务管理
  GET /api/tasks: TaskQueryParams → TaskListResponse
  POST /api/tasks: CreateTaskRequest → Task
  PUT /api/tasks/{id}: UpdateTaskRequest → Task
  DELETE /api/tasks/{id}: void → void
  
  // 任务执行
  POST /api/tasks/{id}/start: void → TaskSession
  GET /api/tasks/{id}/session: void → TaskSession
  PUT /api/tasks/{id}/session: UpdateSessionRequest → TaskSession
}

// 市场模拟API
interface MarketAPI {
  // 市场数据
  GET /api/market/trends: MarketQueryParams → MarketTrends
  GET /api/market/products: ProductQueryParams → ProductList
  GET /api/market/competitors: CompetitorQueryParams → CompetitorList
  
  // 消费者行为
  GET /api/market/consumers: ConsumerQueryParams → ConsumerBehavior
  POST /api/market/analysis: AnalysisRequest → AnalysisResult
}

// 采购管理API
interface ProcurementAPI {
  // 供应商管理
  GET /api/suppliers: SupplierQueryParams → SupplierList
  POST /api/suppliers/evaluate: EvaluationRequest → EvaluationResult
  
  // 谈判模拟
  POST /api/negotiation/start: NegotiationRequest → NegotiationSession
  PUT /api/negotiation/{id}/action: NegotiationAction → NegotiationResponse
  
  // 合同管理
  POST /api/contracts: ContractRequest → Contract
  PUT /api/contracts/{id}/review: ReviewRequest → ReviewResult
}

// 库存管理API
interface InventoryAPI {
  // 库存操作
  GET /api/inventory: InventoryQueryParams → InventoryList
  POST /api/inventory/receive: ReceiveRequest → ReceiveResult
  POST /api/inventory/ship: ShipRequest → ShipResult
  
  // 库存优化
  GET /api/inventory/analysis: AnalysisParams → InventoryAnalysis
  POST /api/inventory/reorder: ReorderRequest → ReorderResult
}
```

#### **1.4.2 WebSocket实时通信**
```typescript
// 实时数据推送
interface WebSocketEvents {
  // 市场变化推送
  'market:update': MarketUpdateEvent
  'market:alert': MarketAlertEvent
  
  // 业务状态推送
  'business:order': OrderEvent
  'business:inventory': InventoryEvent
  'business:finance': FinanceEvent
  
  // 系统通知
  'system:notification': NotificationEvent
  'system:achievement': AchievementEvent
}
```

---

## **2. 用户体验优化**

### **2.1 界面设计规范**

#### **2.1.1 设计系统**
```typescript
// Vue 3 + Element Plus 主题配置
import { ElConfigProvider } from 'element-plus'

// 主题配置
interface ThemeConfig {
  primary: '#409EFF'  // Element Plus 默认主色
  success: '#67C23A'
  warning: '#E6A23C'
  error: '#F56C6C'
  info: '#909399'
  
  // 业务色彩
  profit: '#67C23A'
  loss: '#F56C6C'
  neutral: '#909399'
  highlight: '#E6A23C'
}

// Vue 3 组件规范
interface VueComponentSpecs {
  // 数据卡片组件
  DataCard: {
    title: string
    value: number | string
    trend?: 'up' | 'down' | 'stable'
    change?: number
    unit?: string
  }
  
  // 操作按钮组件
  ActionButton: {
    type: 'primary' | 'success' | 'warning' | 'danger' | 'info'
    size: 'large' | 'default' | 'small'
    loading?: boolean
    disabled?: boolean
  }
  
  // 进度指示器组件
  ProgressIndicator: {
    percentage: number
    status?: 'success' | 'exception' | 'warning'
    strokeWidth?: number
    textInside?: boolean
  }
}
```


```

#### **2.1.2 响应式布局**
```css
/* 断点设计 */
@media (max-width: 576px) { /* 手机端 */ }
@media (min-width: 577px) and (max-width: 768px) { /* 平板端 */ }
@media (min-width: 769px) and (max-width: 1024px) { /* 小屏桌面 */ }
@media (min-width: 1025px) { /* 大屏桌面 */ }

/* 布局网格 */
.grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 16px;
  padding: 16px;
}
```

### **2.2 交互设计优化**

#### **2.2.1 新手引导系统**
```typescript
// Vue 3 新手引导系统
import { ref, reactive } from 'vue'
import { ElMessage, ElMessageBox } from 'element-plus'

interface TutorialSystem {
  // 引导步骤
  steps: TutorialStep[]
  
  // 引导类型
  type: 'modal' | 'tooltip' | 'highlight' | 'overlay'
  
  // 引导触发
  trigger: 'auto' | 'manual' | 'condition'
  
  // 引导状态
  status: 'not_started' | 'in_progress' | 'completed' | 'skipped'
}

// Vue 3 组合式API实现
export function useTutorial() {
  const currentStep = ref(0)
  const isVisible = ref(false)
  const tutorialData = reactive({
    steps: [],
    status: 'not_started'
  })
  
  const startTutorial = () => {
    isVisible.value = true
    tutorialData.status = 'in_progress'
    currentStep.value = 0
  }
  
  const nextStep = () => {
    if (currentStep.value < tutorialData.steps.length - 1) {
      currentStep.value++
    } else {
      completeTutorial()
    }
  }
  
  const completeTutorial = () => {
    tutorialData.status = 'completed'
    isVisible.value = false
    ElMessage.success('教程完成！')
  }
  
  return {
    currentStep,
    isVisible,
    tutorialData,
    startTutorial,
    nextStep,
    completeTutorial
  }
}
```

interface TutorialStep {
  id: string
  title: string
  content: string
  target: string // CSS选择器
  position: 'top' | 'bottom' | 'left' | 'right'
  action?: 'click' | 'input' | 'scroll'
  validation?: (element: HTMLElement) => boolean
}
```

#### **2.2.2 智能提示系统**
```typescript
interface SmartHint {
  // 提示类型
  type: 'info' | 'warning' | 'error' | 'success' | 'tip'
  
  // 提示内容
  title: string
  content: string
  action?: string
  
  // 显示逻辑
  condition: (context: any) => boolean
  priority: number
  
  // 用户反馈
  dismissed?: boolean
  helpful?: boolean
}
```

---

## **3. 评估体系优化**

### **3.1 多维度评估模型**

#### **3.1.1 KPI指标体系**
```typescript
interface KPIModel {
  // 财务指标 (40%)
  financial: {
    totalRevenue: number
    totalProfit: number
    profitMargin: number
    returnOnInvestment: number
    cashFlow: number
  }
  
  // 运营指标 (30%)
  operational: {
    inventoryTurnover: number
    orderFulfillmentRate: number
    supplierOnTimeDelivery: number
    customerSatisfaction: number
    stockoutRate: number
  }
  
  // 决策指标 (20%)
  decision: {
    negotiationSuccessRate: number
    costControlEffectiveness: number
    riskManagementScore: number
    strategicAlignment: number
  }
  
  // 学习指标 (10%)
  learning: {
    knowledgeApplication: number
    skillImprovement: number
    problemSolving: number
    adaptability: number
  }
}
```

#### **3.1.2 智能评分算法**
```typescript
interface ScoringAlgorithm {
  // 基础分数计算
  calculateBaseScore(kpi: KPIModel): number
  
  // 难度系数调整
  applyDifficultyMultiplier(baseScore: number, difficulty: string): number
  
  // 时间效率奖励
  applyTimeEfficiencyBonus(score: number, timeSpent: number): number
  
  // 创新性加分
  applyInnovationBonus(score: number, innovativeDecisions: Decision[]): number
  
  // 风险控制奖励
  applyRiskManagementBonus(score: number, riskDecisions: Decision[]): number
}
```

### **3.2 个性化反馈系统**

#### **3.2.1 智能分析报告**
```typescript
interface AnalysisReport {
  // 总体表现
  overall: {
    score: number
    rank: number
    percentile: number
    grade: string
  }
  
  // 分项分析
  breakdown: {
    financial: FinancialAnalysis
    operational: OperationalAnalysis
    decision: DecisionAnalysis
    learning: LearningAnalysis
  }
  
  // 改进建议
  recommendations: Recommendation[]
  
  // 知识点关联
  knowledgePoints: KnowledgePoint[]
  
  // 历史对比
  historicalComparison: HistoricalData
}
```

#### **3.2.2 动态学习路径**
```typescript
interface LearningPath {
  // 当前水平
  currentLevel: string
  
  // 学习目标
  targetLevel: string
  
  // 推荐模块
  recommendedModules: Module[]
  
  // 练习建议
  practiceSuggestions: PracticeSuggestion[]
  
  // 评估计划
  assessmentPlan: AssessmentPlan
}
```

---

## **4. 性能与安全优化**

### **4.1 性能优化策略**

#### **4.1.1 前端性能**
```typescript
// 代码分割策略
const routeBasedSplitting = {
  'market-analysis': () => import('./views/MarketAnalysis.vue'),
  'procurement': () => import('./views/Procurement.vue'),
  'inventory': () => import('./views/Inventory.vue'),
  'reporting': () => import('./views/Reporting.vue')
}

// 缓存策略
const cacheStrategy = {
  // 静态资源缓存
  staticAssets: {
    maxAge: 31536000, // 1年
    immutable: true
  },
  
  // API响应缓存
  apiResponses: {
    maxAge: 300, // 5分钟
    vary: ['Authorization']
  },
  
  // 用户数据缓存
  userData: {
    maxAge: 3600, // 1小时
    staleWhileRevalidate: 300
  }
}
```

#### **4.1.2 后端性能**
```php
// 数据库优化配置
// config/database.php
return [
    'default' => env('DB_CONNECTION', 'mysql'),
    'connections' => [
        'mysql' => [
            'driver' => 'mysql',
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'training_system'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => 'utf8mb4',
            'collation' => 'utf8mb4_unicode_ci',
            'prefix' => '',
            'strict' => true,
            'engine' => null,
            'options' => [
                PDO::ATTR_PERSISTENT => true,
                PDO::ATTR_TIMEOUT => 30,
                PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8mb4"
            ],
        ],
    ],
];

// 缓存配置
// config/cache.php
return [
    'default' => env('CACHE_DRIVER', 'redis'),
    'stores' => [
        'redis' => [
            'driver' => 'redis',
            'connection' => 'cache',
            'lock_connection' => 'default',
        ],
    ],
    'prefix' => env('CACHE_PREFIX', 'training_'),
];
```

### **4.2 安全防护措施**

#### **4.2.1 身份认证与授权**
```typescript
// JWT Token管理
interface TokenManager {
  // Token生成
  generateToken(user: User): string
  
  // Token验证
  validateToken(token: string): User | null
  
  // Token刷新
  refreshToken(refreshToken: string): TokenResponse
  
  // Token撤销
  revokeToken(token: string): void
}

// 权限控制
interface PermissionControl {
  // 角色权限映射
  rolePermissions: Map<string, string[]>
  
  // 资源权限检查
  checkPermission(user: User, resource: string, action: string): boolean
  
  // 动态权限更新
  updatePermissions(userId: string, permissions: string[]): void
}
```

#### **4.2.2 数据安全**
```typescript
// 数据加密
interface DataEncryption {
  // 敏感数据加密
  encryptSensitiveData(data: any): string
  
  // 数据解密
  decryptSensitiveData(encryptedData: string): any
  
  // 传输加密
  encryptTransmission(data: any): string
}

// 审计日志
interface AuditLog {
  // 操作记录
  logUserAction(userId: string, action: string, details: any): void
  
  // 数据变更记录
  logDataChange(table: string, recordId: string, changes: any): void
  
  // 安全事件记录
  logSecurityEvent(event: SecurityEvent): void
}
```

---

## **5. 部署与运维**

### **5.1 容器化部署**
```yaml
# docker-compose.yml
version: '3.8'
services:
  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    environment:
      - VUE_APP_API_URL=http://localhost:8000
    depends_on:
      - backend
  
  backend:
    build: ./backend
    ports:
      - "8000:8000"
    environment:
      - APP_ENV=production
      - DB_HOST=mysql
      - REDIS_HOST=redis
    depends_on:
      - mysql
      - redis
  
  mysql:
    image: mysql:8.0
    environment:
      - MYSQL_ROOT_PASSWORD=password
      - MYSQL_DATABASE=training_system
    volumes:
      - mysql_data:/var/lib/mysql
  
  redis:
    image: redis:6.2
    volumes:
      - redis_data:/data

volumes:
  mysql_data:
  redis_data:
```

### **5.2 监控与告警**
```typescript
// 性能监控
interface PerformanceMonitoring {
  // 前端性能监控
  frontendMetrics: {
    pageLoadTime: number
    apiResponseTime: number
    userInteractionTime: number
    errorRate: number
  }
  
  // 后端性能监控
  backendMetrics: {
    cpuUsage: number
    memoryUsage: number
    databaseConnections: number
    apiThroughput: number
  }
  
  // 业务指标监控
  businessMetrics: {
    activeUsers: number
    taskCompletionRate: number
    averageScore: number
    systemUptime: number
  }
}

// 告警系统
interface AlertSystem {
  // 告警规则
  alertRules: AlertRule[]
  
  // 告警通知
  sendAlert(alert: Alert): void
  
  // 告警升级
  escalateAlert(alert: Alert): void
}
```

---

## **6. 总结**

本优化版需求文档在原有基础上，重点补充了以下关键内容：

1. **技术架构设计：** 详细的系统架构图、数据模型、API接口设计
2. **用户体验优化：** Vue 3 + Element Plus设计系统规范、响应式布局、智能引导系统
3. **评估体系完善：** 多维度KPI模型、智能评分算法、个性化反馈
4. **性能安全保障：** ThinkPHP 6.0 + Vue 3性能优化、安全防护措施
5. **部署运维支持：** 容器化部署、监控告警系统

**技术栈优势：**
- **ThinkPHP 6.0：** 轻量级、高性能、开发效率高，适合快速构建API服务
- **Vue 3：** 渐进式框架、组合式API、更好的TypeScript支持
- **Element Plus：** 企业级UI组件库，与Vue 3完美集成
- **整体架构：** 相比Spring Boot更轻量，部署简单，维护成本低

这些优化使得需求文档更加完整、可实施，为软件开发团队提供了清晰的技术路线图和实施指南。 