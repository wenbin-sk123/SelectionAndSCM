# 电商选品与供应链管理实训软件开发标准

## 项目概述

### 项目目标
- 构建基于《电商采购实战一本通》的完整实训平台
- 实现从市场调研到供应链管理的全流程模拟
- 提供智能评估体系和个性化学习路径

### 技术架构
- **前端**: Vue 3 + TypeScript + Element Plus
- **后端**: ThinkPHP 6.0 + MySQL + Redis
- **AI引擎**: Python + TensorFlow
- **数据可视化**: ECharts + D3.js
- **实时通信**: WebSocket + Socket.io
- **部署**: Docker容器化

## 项目架构标准

### 目录结构规范
```
project-root/
├── frontend/                 # Vue 3 前端应用
│   ├── src/
│   │   ├── components/      # 可复用组件
│   │   ├── views/           # 页面组件
│   │   ├── services/        # API服务
│   │   ├── stores/          # 状态管理
│   │   └── utils/           # 工具函数
├── backend/                  # ThinkPHP 6.0 后端
│   ├── app/
│   │   ├── controller/      # 控制器
│   │   ├── model/          # 数据模型
│   │   ├── service/        # 业务逻辑
│   │   └── middleware/     # 中间件
├── ai-engine/               # Python AI引擎
│   ├── models/             # TensorFlow模型
│   ├── services/           # AI服务
│   └── utils/              # 工具函数
├── docker/                  # 容器化配置
└── docs/                   # 项目文档
```

### 微服务架构标准
- **服务分离**: 前端、后端、AI引擎必须独立部署
- **API设计**: 严格遵循RESTful API规范
- **数据一致性**: 使用Redis缓存确保数据一致性
- **实时通信**: WebSocket用于实时数据推送

## 代码标准

### Vue 3 前端标准
- **组件命名**: 使用PascalCase，如 `MarketAnalysis.vue`
- **组合式API**: 优先使用Composition API，避免Options API
- **TypeScript**: 所有组件必须使用TypeScript，提供完整类型定义
- **Element Plus**: 统一使用Element Plus组件库，保持UI一致性
- **状态管理**: 使用Pinia进行状态管理，避免Vuex

### ThinkPHP 6.0 后端标准
- **控制器命名**: 使用PascalCase，如 `UserController.php`
- **模型关联**: 使用Eloquent ORM，定义清晰的关联关系
- **API响应**: 统一响应格式，包含状态码、消息和数据
- **数据验证**: 使用验证器确保数据完整性

### Python AI引擎标准
- **模型管理**: 使用TensorFlow 2.x，支持模型版本控制
- **数据处理**: 使用pandas和numpy进行数据处理
- **API接口**: 使用FastAPI提供AI服务接口
- **错误处理**: 完善的异常处理和日志记录

## 功能实现标准

### 数据库设计标准
- **用户表**: 支持学生、教师、管理员三种角色
- **任务表**: 包含初始资金、时间限制、目标KPI等字段
- **进度表**: 记录学员实时进度和评估数据
- **JSON字段**: 使用JSON类型存储复杂数据结构

### API接口标准
- **RESTful设计**: 严格遵循RESTful API设计原则
- **版本控制**: API版本必须包含在URL中，如 `/api/v1/users`
- **状态码**: 使用标准HTTP状态码
- **错误处理**: 统一的错误响应格式

### 评估体系标准
- **KPI模型**: 财务40%、运营30%、决策20%、学习10%
- **智能评分**: 实现多维度评分算法
- **个性化反馈**: 基于学习路径的个性化建议
- **历史对比**: 支持历史数据对比分析

## 文件协调标准

### 数据库变更协调
- **模型更新**: 修改ThinkPHP模型时必须同时更新数据库迁移文件
- **KPI变更**: 评估指标变更必须同步更新前端可视化组件
- **API变更**: 后端API变更必须更新前端服务文件

### 组件依赖协调
- **设计系统**: Element Plus组件必须遵循统一的设计规范
- **数据可视化**: ECharts图表必须使用预定义的图表模板
- **状态管理**: Pinia store变更必须通知相关组件

### AI引擎协调
- **模型集成**: Python TensorFlow模型必须通过标准接口与PHP后端通信
- **谈判模拟**: 前端UI必须与AI决策引擎保持实时同步
- **数据流**: WebSocket必须确保AI引擎与前端的数据实时传输

## AI决策标准

### 优先级处理
1. **安全第一**: 所有功能实现必须优先考虑安全性
2. **性能优化**: 数据库查询、缓存策略、前端渲染优化
3. **用户体验**: 界面响应速度、错误提示、加载状态
4. **代码质量**: 可维护性、可扩展性、可测试性

### 错误处理模式
- **前端错误**: 使用try-catch捕获，显示用户友好的错误信息
- **后端错误**: 记录详细日志，返回标准错误响应
- **AI引擎错误**: 降级处理，提供备选方案
- **网络错误**: 实现重试机制，提供离线功能

### 安全实现模式
- **JWT认证**: 所有API请求必须包含有效的JWT令牌
- **数据加密**: 敏感数据必须加密存储和传输
- **输入验证**: 所有用户输入必须进行严格验证
- **权限控制**: 基于角色的访问控制(RBAC)

## 禁止行为

### 安全禁止
- **硬编码敏感信息**: 禁止在代码中硬编码API密钥、数据库密码等
- **绕过认证**: 禁止跳过身份验证和授权检查
- **SQL注入**: 禁止使用字符串拼接构建SQL查询
- **XSS攻击**: 禁止直接输出用户输入内容

### 代码质量禁止
- **忽略错误处理**: 禁止在关键业务逻辑中忽略错误处理
- **不一致UI**: 禁止创建不符合设计系统的UI组件
- **无测试代码**: 禁止实现功能而不编写相应的测试用例
- **数据库变更**: 禁止直接修改数据库而不创建迁移文件

### 架构禁止
- **紧耦合**: 禁止创建高度耦合的组件和服务
- **单点故障**: 禁止设计可能导致单点故障的架构
- **性能瓶颈**: 禁止创建可能导致性能问题的实现
- **可扩展性差**: 禁止设计难以扩展的架构

## 工作流标准

### 开发流程
1. **需求分析**: 明确功能需求和用户故事
2. **技术设计**: 确定技术实现方案和架构设计
3. **代码实现**: 按照编码标准实现功能
4. **测试验证**: 编写单元测试和集成测试
5. **代码审查**: 进行代码审查和质量检查
6. **部署上线**: 使用Docker容器化部署

### 协调要求
- **多文件修改**: 涉及多个文件的变更必须同时提交
- **API版本**: API变更必须考虑向后兼容性
- **数据迁移**: 数据库变更必须提供迁移脚本
- **文档更新**: 功能变更必须更新相关文档

### 质量保证
- **代码覆盖率**: 单元测试覆盖率必须达到80%以上
- **性能测试**: 关键功能必须进行性能测试
- **安全测试**: 定期进行安全漏洞扫描
- **用户体验**: 定期进行用户体验测试

## 技术栈特定约束

### Vue 3 约束
- **组合式API**: 新组件必须使用Composition API
- **TypeScript**: 所有组件必须使用TypeScript
- **Element Plus**: UI组件必须使用Element Plus
- **响应式设计**: 必须支持移动端和桌面端

### ThinkPHP 6.0 约束
- **MVC模式**: 严格遵循MVC架构模式
- **中间件**: 使用中间件处理通用逻辑
- **服务层**: 业务逻辑必须放在服务层
- **缓存策略**: 合理使用Redis缓存

### Python TensorFlow 约束
- **模型版本**: 使用版本控制管理模型文件
- **API接口**: 通过FastAPI提供标准化接口
- **错误处理**: 完善的异常处理和日志记录
- **性能优化**: 模型推理性能优化

### WebSocket 约束
- **事件命名**: 使用统一的命名规范
- **错误处理**: 连接断开和重连机制
- **数据格式**: 统一的数据传输格式
- **安全性**: 身份验证和授权检查

## 部署运维标准

### 容器化部署
- **Docker Compose**: 使用docker-compose.yml管理多服务
- **环境变量**: 使用环境变量管理配置
- **健康检查**: 所有服务必须实现健康检查
- **日志管理**: 统一的日志收集和分析

### 监控告警
- **性能监控**: 监控系统性能和资源使用
- **错误告警**: 实时监控错误和异常
- **业务指标**: 监控关键业务指标
- **可用性**: 监控系统可用性和响应时间

### 备份恢复
- **数据备份**: 定期备份数据库和文件
- **配置备份**: 备份系统配置和设置
- **恢复测试**: 定期测试备份恢复流程
- **灾难恢复**: 制定灾难恢复计划

## 更新维护标准

### 版本管理
- **语义化版本**: 使用语义化版本号
- **变更日志**: 维护详细的变更日志
- **向后兼容**: 优先保持向后兼容性
- **迁移指南**: 提供版本升级指南

### 文档维护
- **API文档**: 保持API文档的及时更新
- **用户手册**: 维护用户操作手册
- **开发文档**: 更新技术实现文档
- **部署文档**: 维护部署和运维文档

### 持续改进
- **用户反馈**: 收集和分析用户反馈
- **性能优化**: 持续进行性能优化
- **安全更新**: 及时更新安全补丁
- **功能增强**: 根据需求持续增强功能 